# Formatting input files

To use FragPipe-Analyst, user need to prepare two files. One is a quantification table obtained after running FragPipe and the other one is the metadata. The table below summarizes the file combinations you should use with FragPipe-Analyst.

|                      | LFQ                                       |   DIA    |  TMT    |
| ---------------------|-------------------------------------------|----------|---------|
| Quantification Table |combined_proteins.tsv generated by IonQuant|PG matrix generated by DIANN |Gene reports generated by in TMT-I|
| Metadata   |  experiment_annotation.tsv | experimentd_annotation.tsv | experiment_annotation.txt |

# LFQ

For LFQ, FragPipe-Analyst uses `experiment_annotation.tsv` similar to FragPipe manifest internally used for FragPipe, but note that `experiment_annotation.tsv` is a file with header. We also rename and delete some column names. For example, here is an LFQ experiment of tumor (T) and normal (N) samples. It has three replicates for each tumor:

| file | label | replicate |
|---------------------------------------------------------------------------------|-----|---|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_16_37N_1_140729074952.mzML|N_37	|1	|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_17_37N_2_140729101310.mzML|N_37	|2	|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_18_37N_3_140729122909.mzML|N_37 |3	|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_21_12T_1_140729160716.mzML|T_12 |1	|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_22_12T_2_140729182320.mzML|T_12	|2	|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_23_12T_3_140729203924.mzML|T_12	|3	|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_25_27N_1_140730001730.mzML|N_27	|1	|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_26_27N_2_140730023333.mzML|N_27	|2	|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_27_27N_3_140730044935.mzML|N_27	|3	|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_39_3T_1.mzML	          |T_3	|1	|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_40_3T_2.mzML	          |T_3	|2	|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_41_3T_3.mzML	          |T_3  |3	|

Note that since FragPipe-Analyst focus on differential expression analysis. You should have more than one condition available in the `experiment` column like T/N or Tumor/NAT in the examples mentioned above. If you have more than one patients, you could use underscore (`_`) to label samples like `T_3`, `N_37` shown above. 

# TMT
For TMT, FragPipe-Analyst uses `experiment_annotation.tsv` file as metadata. Basically, it is a tab delimited file `with` header and combines all information you documented in `annotations.txt` when you prepared your FragPipe TMT workflow. It contains following columns: `experiment`, `channel`, `label`,  `replicate`, `condition`. It will be automatically generated by *FragPipe* released recently, but **don't** upload the file blindly generated, you will need to annotate `replicate` and `condition` columns. Here is an example with four different experimental conditions and each condition is with three replicates:

experiment | channel| label | condition | replicate|
-----------|--------|-------|-----------| ----------|
Yeast_KO11 |	126	| MET6_1| MET6 | 1 |
Yeast_KO11 |	127N| MET6_2| MET6 | 2 |
Yeast_KO11 |	127C| MET6_3| MET6 | 3 |
Yeast_KO11 |	128N| HIS4_1| HIS4 | 1 |
Yeast_KO11 |	128C| HIS4_2| HIS4 | 2 |
Yeast_KO11 |	129N| HIS4_3| HIS4 | 3 |
Yeast_KO11 |	129C| URA2_1| URA2 | 1 |
Yeast_KO11 |	130N| URA2_2| URA2 | 2 |
Yeast_KO11 |	130C| URA2_3| URA2 | 3 |
Yeast_KO11 |	131N| WT_1	| WT   | 1 |
Yeast_KO11 |	131C| WT_2	| WT   | 2 |

Another example shown below is a common experimental desgin with tumor and normal tissue adjacent to the tumor (NAT) samples:

experiment | channel| label | condition | replicate|
-----------|--------|-------|-----------| ----------|
TMT_01s |126  |CPT0079430001   | NAT    | 1
TMT_01s |127N |CPT0023360001   | NAT	| 1
TMT_01s |127C |CPT0023350003   | Tumor	| 1
TMT_01s |128N |CPT0079410003   | Tumor	| 1
TMT_01s |128C |CPT0087040003   | Tumor	| 1
TMT_01s |129N |CPT0077310003   | Tumor	| 1
TMT_01s |129C |CPT0077320001   | NAT	| 1
TMT_01s |130N |CPT0087050003   | NAT	| 1
TMT_01s |130C |CPT0023710001_1 | NAT	| 1
TMT_01s |131N |pool01          | pool	| 1
TMT_02s |126  |NCI7-1          | QC	    | 1
TMT_02s |127N |CPT0078840001   | NAT	| 1
TMT_02s |127C |CPT0075570001   | Tumor	| 1
TMT_02s |128N |CPT0075560003   | NAT	| 1
TMT_02s |128C |CPT0078830003   | Tumor	| 1
TMT_02s |129N |CPT0077490003   | NAT	| 1
TMT_02s |129C |CPT0077500001   | NAT	| 1
TMT_02s |130N |CPT0023690003   | Tumor	| 1
TMT_02s |130C |CPT0023710001_2 | Tumor	| 2
TMT_02s |131N |pool02          | pool	| 1

See [TMT tutorial](TMT-Tutorial) for more detailed analysis you could achieve through FragPipe-Analyst.

# DIA

For DIA, it uses `experiment_annotation.tsv` file as metadata. It's similar to what we have for TMT, but note that columns in the `experiment_annotation.tsv` for DIA are not the same for TMT. FragPipe-Analyst expects it has following columns: `file`, `label`, `condition`, `replicate`. Here is an example of DIA experiment with 20 samples from CPTAC ccRCC discovery dataset:

|file|label|condition|replicate|
|--|--|--|--|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00010_T.mzML |	C3L-00010_T | Tumor |	1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00183_NAT.mzML | C3L-00183_NAT |NAT | 1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00103_NAT.mzML | C3L-00103_NAT |NAT	| 1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00088_NAT.mzML | C3L-00088_NAT |NAT	| 1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00004_T.mzML | C3L-00004_T  | Tumor	| 1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00183_T.mzML | C3L-00183_T	| Tumor	| 1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00004_NAT.mzML | C3L-00004_NAT |NAT |	1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00096_T.mzML | C3L-00096_T	| Tumor |	1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00097_T.mzML | C3L-00097_T  | Tumor |	1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00026_NAT.mzML | C3L-00026_NAT |NAT |	1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00026_T.mzML | C3L-00026_T	| Tumor |	1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00096_NAT.mzML | C3L-00096_NAT |NAT | 1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00103_T.mzML | C3L-00103_T  | Tumor |	1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00010_NAT.mzML |	C3L-00010_NAT |NAT|	1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00079_NAT.mzML |	C3L-00079_NAT |NAT| 1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00079_T.mzML | C3L-00079_T  | Tumor | 1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00088_T.mzML | C3L-00088_T	| Tumor |	1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00011_NAT.mzML |	C3L-00011_NAT |NAT|	1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00011_T.mzML | C3L-00011_T	| Tumor |	1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00097_NAT.mzML |  C3L-00097_NAT |NAT|	1	|

